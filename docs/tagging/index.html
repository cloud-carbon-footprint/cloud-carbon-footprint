<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ConfigurationOptions/tagging">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Tagging | Cloud Carbon Footprint</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cloud-carbon-footprint.github.io/docs/tagging"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tagging | Cloud Carbon Footprint"><meta data-rh="true" name="description" content="Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs."><meta data-rh="true" property="og:description" content="Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://cloud-carbon-footprint.github.io/docs/tagging"><link data-rh="true" rel="alternate" href="https://cloud-carbon-footprint.github.io/docs/tagging" hreflang="en"><link data-rh="true" rel="alternate" href="https://cloud-carbon-footprint.github.io/docs/tagging" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://L8RY6HBDJZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Cloud Carbon Footprint" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.cd3a4fb1.css">
<link rel="preload" href="/assets/js/runtime~main.d18a30ad.js" as="script">
<link rel="preload" href="/assets/js/main.386a0a5c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cloud Carbon Footprint</b></a><a class="navbar__item navbar__link navbar__link" href="/docs/getting-started">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://demo.cloudcarbonfootprint.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__link">Demo</a><a href="https://github.com/cloud-carbon-footprint/cloud-carbon-footprint" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__link">Github</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/methodology">How it Works</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/methodology">Methodology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/embodied-emissions">Embodied Emissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/classifying-usage-types">Classifying Usage Types</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/aws">Connecting Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/data-persistence-and-caching">Configuration Options</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data-persistence-and-caching">Data Persistence and Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/performance-considerations">Performance Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tagging">Tagging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configurations-glossary">Configurations Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/backstage-plugins">Integrations</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Configuration Options</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tagging</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tagging</h1></header><p>Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs. </p><p>CCF supports the capturing of these tags as part of resource metadata and filtering of cached results via an API parameter. Currently tagging support is limited to AWS and those using MongoDB, and filtering data based on tag is only possible when directly querying the API.</p><p>By including resource tags in the data retrieved from cloud providers and then filtering to estimate energy and carbon only for specific tags, you can get a better sense of carbon as it relates to your business contexts, org structure, applications, etc. With this information, you can potentially better target areas to focus and optimize.</p><p>Tags can be specified by providing a list of tag names to the appropriate config variable within the <code>.env</code> file of your API or CLI package.</p><p>Example: Specifying <code>AWS_RESOURCE_TAG_NAMES=[&quot;user:Environment&quot;, ‚Äúaws:createdBy‚Äù]</code> in your API or CLI <code>.env</code> file will include the corresponding tag values for each AWS resource in the results:</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;cloudProvider&quot;: &quot;AWS&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;kilowattHours&quot;: 9.17,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;co2e&quot;: 2.064,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;usesAverageCPUConstant&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;serviceName&quot;: &quot;AWSLambda&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;accountId&quot;: &quot;1234567890&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;accountName&quot;: &quot;example-account&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;region&quot;: &quot;eu-west-2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;cost&quot;: 0.0000238,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;tags&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;user:Environment&quot;: &quot;production&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ‚Äúuser:Production‚Äù: ‚ÄúIAMUser:example-user‚Äù,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-tagging-conventions">AWS Tagging Conventions<a href="#aws-tagging-conventions" class="hash-link" aria-label="Direct link to AWS Tagging Conventions" title="Direct link to AWS Tagging Conventions">‚Äã</a></h3><p>The AWS Cost and Usage Reporting (CUR) translates tag names to names that are valid Athena column names. On top of this, it also adds a prefix to distinguish between user-created tags and AWS-internal tags. While not documented, we have found that a tag such as SourceRepository will be <code>user:SourceRepository</code> in CUR, and <code>resource_tags_user_source_repository</code> in Athena (AWS-internal tags will be prefixed with <code>aws:</code> instead of <code>user:</code> in CUR).
To include a list of resource tags for AWS, you must set the <code>AWS_RESOURCE_TAG_NAMES</code> with the appropriate prefixes included.</p><p>Example:
<code>AWS_RESOURCE_TAG_NAMES=[&quot;user:Environment&quot;, &quot;aws:CreatedBy&quot;]</code></p><p>For more information on AWS tags, you can refer to the <a href="https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html" target="_blank" rel="noopener noreferrer">official AWS tagging documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="azure-tagging-conventions">Azure Tagging Conventions<a href="#azure-tagging-conventions" class="hash-link" aria-label="Direct link to Azure Tagging Conventions" title="Direct link to Azure Tagging Conventions">‚Äã</a></h3><p>The <a href="https://learn.microsoft.com/en-us/rest/api/consumption/" target="_blank" rel="noopener noreferrer">Azure Consumption API</a> exposes a resource&#x27;s <code>tag</code> property as a field in each row of billing data. This field allows for access to the <code>resourceGroup</code> property as well.
Both of these properties can be accessed as tagging configs within CCF. To include a list of resource tags for Azure, you must set the <code>Azure_Resource_Tag_Names</code>.</p><p>Example: <code>AZURE_RESOURCE_TAG_NAMES=[&quot;resourceGroup&quot;, &quot;project&quot;, &quot;customer&quot;]</code></p><p>For more information on Azure tags, you can refer to the <a href="https://learn.microsoft.com/en-us/rest/api/consumption/tags/get?source=recommendations&amp;tabs=HTTP" target="_blank" rel="noopener noreferrer">official Azure Consumption tags documentation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="filtering-estimates-by-tags-via-api">Filtering Estimates by Tags via API<a href="#filtering-estimates-by-tags-via-api" class="hash-link" aria-label="Direct link to Filtering Estimates by Tags via API" title="Direct link to Filtering Estimates by Tags via API">‚Äã</a></h2><p>Once tags have been included in the data cached in MongoDB, you can filter the data retrieved from the API by specifying the desired tag via API parameter. For more details, please visit the <a href="/docs/data-persistence-and-caching/#filtering-estimates">Filtering Estimates</a> section of the <a href="/docs/data-persistence-and-caching">Data Persistence and Caching</a> page.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/performance-considerations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Performance Considerations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/configurations-glossary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configurations Glossary</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#aws-tagging-conventions" class="table-of-contents__link toc-highlight">AWS Tagging Conventions</a></li><li><a href="#azure-tagging-conventions" class="table-of-contents__link toc-highlight">Azure Tagging Conventions</a></li><li><a href="#filtering-estimates-by-tags-via-api" class="table-of-contents__link toc-highlight">Filtering Estimates by Tags via API</a></li></ul></div></div></div></div></main></div></div><div><div class="footerLicenseContainer_aMKa"><a class="footerLicenseLink_V4Yd signature_Phj5" target="_blank" href="https://www.thoughtworks.com">Made for the üåé by Thoughtworks</a><p>Cloud Carbon Footprint is an open-source project, sponsored by Thoughtworks Inc. under the¬†<a class="footerLicenseLink_V4Yd undefined" target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a></p><p><a class="footerLicenseLink_V4Yd undefined" target="_blank" href="https://www.thoughtworks.com/privacy-policy">PRIVACY POLICY</a></p></div></div></div>
<script src="/assets/js/runtime~main.d18a30ad.js"></script>
<script src="/assets/js/main.386a0a5c.js"></script>
</body>
</html>